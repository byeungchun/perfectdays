# Perfectdays 분석

## 프로세스

### 개요
시뮬레이션은 거래일을 기준으로 투자의사 결정프로세스를 실행합니다.

**주요 컴포넌트:**
- **메인 프로세서**: `eda_strategy01_agent`
- **투자 행위**: `investor_agent`
- **종목 관리**: `stock_agent`

### 실행 절차

#### 0. 스크립트 실행
`run-strategy01-all` 파워쉘 스크립트를 실행

#### 1. 설정 로드
`config` 폴더에서 전략 YAML 파일을 읽어드림

#### 2. 데이터 로드
CapIQ에서 받은 다음 데이터를 로드:
- 종목 메타데이터
- 종목 가격
- 시가총액

#### 3. 시뮬레이션 실행
YAML에서 의사결정 파라미터를 읽어드려 `run_simulation` 실행
- `max_workers` 파라미터: 종목의 수가 많을 때 분산처리 목적

#### 4. 종목 구매 의사 결정
직전 `minimum_records` (현재 20 거래일)을 기준으로:
- **평균 거래량**: 증가해야 함 → 인기 있음을 의미
- **평균 가격 변화**: 안정적이어야 함 → 이미 많이 올랐는지 체크

**의사결정 로직:**
- 평균 거래량은 증가하는데, 가격이 일정하면 투자 가능
- 이미 투자 중인 종목은 스킵
- **초기 자본의 10%를 투자** 
  - **TODO**: 현재 가용 현금과 종목별 위험도를 고려한 로직으로 개선 필요

#### 5. 종목 판매 의사 결정
- **이전 로직**: 구매 후 `sell_after_days` 거래일이 지나면 무조건 판매
- **Enhanced Sell 로직**: (TODO) Copilot 검토 필요

#### 6. 결과 분석 및 보고서 생성
`result_analysis`를 통해 시뮬레이션 결과 파일 생성:
- Company Revenue (엑셀파일)
- Company Revenue Analysis (엑셀파일)
- `strategy01_result_analysis4` 노트북을 통해 결과 분석

---

## 추가해야 할 로직

### 1. 뉴스 Embedding 통합
뉴스 embedding 결과를 투자의사결정 모형에 어떻게 삽입할 것인가?
- 투자의사결정 시 해당 정보를 추가해야 함
- **현안**: Sentiment 레이블이 현재 없는 상태 → embedding에 sentiment 정보를 어떻게 포함할지 검토 필요

### 2. 다중 에이전트 성과 평가 및 전략 최적화
거래일별로 투자자별 성과평가를 하고 전략을 바꾸는 로직이 가능할까?
- **필요성**: 멀티 agent 모형 구축 필요
- **현황**: 현재는 다른 매트릭스에서 실행 중



